<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#1a1a2e" />
    <title>StairLight - Settings</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Generated by Copilot -->

    <div class="container">
      <header class="header">
        <h1>‚öôÔ∏è StairLight Settings</h1>
        <div class="status-indicator" id="connectionStatus">
          <span class="status-dot"></span>
          <span class="status-text">Connecting...</span>
        </div>
      </header>

      <nav class="nav-tabs">
        <a href="/" class="nav-tab">Effects</a>
        <a href="/settings.html" class="nav-tab active">Settings</a>
        <a href="/info.html" class="nav-tab">Info</a>
      </nav>

      <!-- Global Settings -->
      <section class="card">
        <h2>Global Settings</h2>

        <div class="form-group">
          <label for="globalBrightness">Master Brightness: <span id="globalBrightnessVal">80</span>%</label>
          <input type="range" id="globalBrightness" min="10" max="100" value="80" />
          <p class="help-text">Applies to all effects as a multiplier</p>
        </div>

        <div class="form-group">
          <label class="switch">
            <input type="checkbox" id="debugMode" />
            <span class="slider"></span>
          </label>
          <label for="debugMode">Debug Mode</label>
          <p class="help-text">Show sensor readings in real-time</p>
        </div>
      </section>

      <!-- Sensor Settings -->
      <section class="card">
        <h2>Motion Detection</h2>

        <div class="form-group">
          <label for="accelThreshold">Sensitivity: <span id="accelThresholdVal">1.50</span> m/s¬≤</label>
          <input type="range" id="accelThreshold" min="0.5" max="5.0" step="0.1" value="1.5" />
          <p class="help-text">Lower values = more sensitive to motion</p>
        </div>

        <div class="form-group">
          <label for="debounceDelay">Debounce Delay: <span id="debounceDelayVal">200</span>ms</label>
          <input type="range" id="debounceDelay" min="100" max="1000" step="50" value="200" />
          <p class="help-text">Minimum time between motion triggers</p>
        </div>

        <div class="form-group">
          <label for="effectTimeout">Auto-Off Timeout: <span id="effectTimeoutVal">30</span>s</label>
          <input type="range" id="effectTimeout" min="5" max="300" step="5" value="30" />
          <p class="help-text">How long lights stay on before fading out</p>
        </div>
      </section>

      <!-- Installation Mode -->
      <section class="card">
        <h2>üîß Installation Mode</h2>
        <p class="card-description">Test sensor placement during installation. All normal effects are disabled while in installation mode.</p>

        <div class="form-group">
          <label class="switch">
            <input type="checkbox" id="bottomSensorInstall" onchange="toggleBottomSensorInstall()" />
            <span class="slider"></span>
          </label>
          <label for="bottomSensorInstall">Bottom Sensor Test</label>
          <p class="help-text">All LEDs light up when bottom sensor is triggered</p>
        </div>

        <div class="form-group">
          <label class="switch">
            <input type="checkbox" id="motionInstall" onchange="toggleMotionInstall()" />
            <span class="slider"></span>
          </label>
          <label for="motionInstall">Motion Sensor Test</label>
          <p class="help-text">VU meter display shows motion strength (0-100%)</p>
        </div>

        <div class="install-warning" id="installWarning" style="display: none">
          <strong>‚ö†Ô∏è Installation Mode Active</strong>
          <p>Normal motion detection is disabled. Turn off installation mode to resume normal operation.</p>
        </div>
      </section>

      <!-- WiFi Settings -->
      <section class="card">
        <h2>WiFi Configuration</h2>

        <div class="form-group">
          <label class="switch">
            <input type="checkbox" id="useHomeWiFi" />
            <span class="slider"></span>
          </label>
          <label for="useHomeWiFi">Connect to Home WiFi</label>
          <p class="help-text">If disabled, device stays in AP mode</p>
        </div>

        <div class="form-group">
          <label for="wifiSSID">Network Name (SSID)</label>
          <input type="text" id="wifiSSID" placeholder="Your WiFi Network" maxlength="32" />
        </div>

        <div class="form-group">
          <label for="wifiPassword">Password</label>
          <input type="password" id="wifiPassword" placeholder="WiFi Password" maxlength="64" />
          <p class="help-text">‚ö†Ô∏è Device will restart after WiFi changes</p>
        </div>
      </section>

      <!-- Scheduling -->
      <section class="card">
        <h2>Scheduling</h2>

        <div class="form-group">
          <label class="switch">
            <input type="checkbox" id="scheduleEnabled" />
            <span class="slider"></span>
          </label>
          <label for="scheduleEnabled">Enable Time-Based Control</label>
          <p class="help-text">Automatically disable lights during specific hours</p>
        </div>

        <div class="form-group">
          <label for="disableStart">Disable From: <span id="disableStartVal">08:00</span></label>
          <input type="range" id="disableStart" min="0" max="23" value="8" />
        </div>

        <div class="form-group">
          <label for="disableEnd">Enable At: <span id="disableEndVal">20:00</span></label>
          <input type="range" id="disableEnd" min="0" max="23" value="20" />
        </div>

        <div class="form-group">
          <label for="timezoneOffset">Timezone Offset (hours from UTC): <span id="timezoneOffsetVal">+1</span></label>
          <input type="range" id="timezoneOffset" min="-12" max="14" value="1" />
          <p class="help-text">Example: UTC+1 for Central Europe</p>
        </div>
      </section>

      <!-- OTA Update -->
      <section class="card">
        <h2>Firmware Update (OTA)</h2>
        <p class="card-description">Over-The-Air firmware updates (requires WiFi connection)</p>

        <div class="ota-info">
          <p><strong>Hostname:</strong> stairlight.local</p>
          <p><strong>Method:</strong> Arduino OTA</p>
          <p class="help-text">Use PlatformIO or Arduino IDE to upload firmware wirelessly</p>
        </div>
      </section>

      <!-- Save Button -->
      <div class="save-section">
        <button class="btn btn-primary" id="saveBtn" onclick="saveSettings()">üíæ Save Settings</button>
        <div id="saveStatus" class="save-status"></div>
      </div>
    </div>

    <script src="settings.js"></script>
  </body>
</html>
